<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Caption Search</title>
    {% include '/styles/_style_main_page.html' %}
  </head>

  <body>
    <!-- let's get started -->

    <div class="relative" >

      <h1 style = "font-family:georgia,garamond,serif;font-size:22px;font-style:italic;">
        "Don't let your lecture run you."</h1>
      <p class='video_link' style="color:brown;"> **your current lecture link at:** <br> {{user_url}} </p>

      <div class="result_icons">

        <!-- For loop logic of jinja template -->
        <!-- scrapt: onclick='jumpTime({{i}})'  -->
          {%for i in range(0, len)%}

                <img class='caption_icon' id='flag_icon_{{i}}' value={{i}} src="/static/icons/flag_icon.png"
                     alt="me.jpeg"  style=" position: absolute; left: {{icon_pos[i]}}px; ">
                <p class="caption_text" id="captext_{{i}}" value="{{icon_pos[i]}}">
                     {{captions[i]['caption']}}
                </p>

          {%endfor%}

          <div class="video_frame">
              <iframe id='YouTubeVideo' width="800"  height="600" src="{{user_url}}" frameborder="0" ng-show="showvideo"></iframe>
          </div>

      </div>

      <div id='keyword_form'>
        <form action="" method="POST" id='query_field'>

            <label id="keyword_label" style="margin-left: 10px;" > Keyword </label>
            <input name="keyword" id="keyword_box" type="text" value="" placeholder="e.g.problem" required>
            <br>
            <label id="num_results_label" style="margin-left: 10px;"> Number of Results </label>
            <input name="num_results"  id="num_results_box" type="text" value="" placeholder="2" required>
            <br>
            <button id="capsearch_button" type=”submit” name="form_butt"> Search </button>
        </form>
        <br>
      </div>
      <div id='f1_toggle'> </div>

      <div class="debug" >
            <p id='route_debug'> debug mode </p>
      </div>

      <div class="route_check">
        {# temporary section: route checking for home page #}
        {% with keyword=keyword, num_results=num_results,
              route=route, notes=notes, captions=captions,
                icon_pos=icon_pos, time_stamp=time_stamp %}
          {% include 'temp/_route_checks_main.html' %}
        {% endwith %}
      </div>


    </div>


    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script type="text/javascript">

        $("#f1_toggle").click(
               function() {
             $("#keyword_form").toggle();
             $(".caption_icon").toggle();
           })

       //
        $(".caption_icon").mouseover(function(){
             i = $(this).attr('value');
             // alert(icon_id)
             $("#captext_"+i).fadeIn();
        });

        $(".caption_icon").mouseleave(function(){
             i = $(this).attr('value');
             // alert(i);
             $("#captext_"+i).fadeOut();
        });

        $(".debug").click(
                 function() {
               $(".route_check").toggle();

             })

        var player, seconds = 0;
        function onYouTubeIframeAPIReady() {
            console.log("player");
            player = new YT.Player('player', {
                events: {
                  'onReady': onPlayerReady
                }
              });
        }

        function onPlayerReady(event) {
            event.target.playVideo();
        }

        function seek(sec){
            if(player){
                seconds += sec;
                player.seekTo(seconds, true);
            }
        }

    </script>


  </body>
</html>
