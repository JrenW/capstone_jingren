<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Your Hypervideo Room</title>
    {% include '/styles/_style_main.html' %}
  </head>

  <body>
    <!-- let's get started -->

    <div class="relative" >

      <h1 style = "font-family:georgia,garamond,serif;font-size:22px;font-style:italic;">
        "Don't let your lectures run you."</h1>
      <p class='video_link' style="color:brown;"> **original URL before embedding:** <br> {{ original_URL }} </p>

      <div class="result_icons">

        <!-- For loop logic of jinja template -->
        <!-- scrapt: onclick='jumpTime({{i}})'  -->
        {%if len%}
            {%for i in range(0, len)%}

                  <img class='caption_icon' id='flag_icon_{{i}}' value={{i}} src="/static/icons/flag_icon.png"
                       alt="me.jpeg"  style=" position: absolute; left: {{icon_pos[i]}}px; ">
                  <p class="caption_text" id="captext_{{i}}" value="{{icon_pos[i]}}">
                       {{captions[i]['caption']}}
                  </p>

            {%endfor%}

          {%endif%}

          <div class="video_frame" >
              <iframe id='YouTubeVideo' width="800"  height="600" src="{{user_url}}" frameborder="0" ng-show="showvideo"></iframe>
          </div>

          <div class="embedded_explorer" style=" overflow: hidden; opacity: 0.7">
              <iframe id="explorer_page" src="{{ session['explorer_url'] }}" style= "position:relative; width:100%; height:100%; border: none;"></iframe>
          </div>

                <!-- // links to build iframe mini browser within webpage
                // https://stackoverflow.com/questions/32921815/embed-web-browser-within-web-page
                // https://stackoverflow.com/questions/8863029/full-featured-iframe-w-forward-back-buttons-url-loader-etc -->

      </div>

      <div class="feature" id="feature_1">
          <!-- <form method="POST" action="{{ url_for('caption_search', session=session)}}" id='keyword_form' style=" background: #F8E016; top: 300px;"> -->
          <form method="POST" action="/" id='keyword_form' style=" background: #F8E016; top: 300px;">
              <label id="keyword_label" style="margin-left: 10px;" > Keyword </label>
              <input name="keyword" id="keyword_box" type="text" value="why" placeholder="e.g.problem" >
              <br>
              <label id="num_results_label" style="margin-left: 10px;"> Number of Results </label>
              <input name="num_results"  id="num_results_box" type="text" value="2" placeholder="2" >
              <br>
              <button class="button" id="capsearch_button" type=”submit” name="form_butt"> Search </button>
          </form>
          <br>
          <div class='toggle' id='f1_toggle' style="background: #F8E016; top: 300px;"> </div>
      </div>

      <div class="feature" id="feature_2">

          <!-- <form action="{{ url_for('video_hyperlink', session=session)}}" method="POST" id='explorer_form' style=" background: #16F867; top: 180px;"> -->
          <form action="/" method="POST" id='explorer_form' style=" background: #16F867; top: 180px;">
            <p id='explorer_title' style="margin-top: 10px; text-align: center; margin-bottom: 0px"> Hypervideo Explorer </p>

            <input name="explorer_query" id="explorer_inputs" type="text" value="" placeholder="e.g.tutorial on entropy" style="margin-left: 10%; margin-top: 5%; width: 150px;">
            <!-- <input  name="sitesearch" type="hidden" value="">
            <input name="explorer_query" id="explorer_inputs" autocomplete="on" class="form-control search" name="q" placeholder=""
                  style="margin-left: 10%; margin-top: 5%; width: 150px;"> -->
            <br>
            <button class="button" id="hypervideo_button"  type="submit">Explore</button>

          </form>
          <br>
          <div class='toggle' id='f2_toggle' style="background: #16F867; top: 180px;"> </div>

      </div>

      <div class="feature" id="feature_3">
        <form action="/" method="POST" id='intralink_form' style="background: #A968F3; top: 420px;">
              <p id='intralink_title' style="margin-top: 17px; text-align: center; margin-bottom: 0px"> Select Two Moments to <br> Add An Intralink </p>
              <button id="intralink_button" type=”submit” name="form_butt"> Add </button>
          </form>
          <br>
          <div class='toggle' id='f3_toggle' style="background: #A968F3; top: 420px;"> </div>
      </div>


      <div class="debug" >
            <p id='route_debug'> debug mode </p>
            <div class="route_check">
              {# temporary section: route checking for home page #}
              {% with keyword=session['keyword'], num_results=session['num_results'],
                    route=route, notes=notes, captions=captions,
                      icon_pos=icon_pos, time_stamp=time_stamp %}
                {% include 'temp/_route_checks_main.html' %}
              {% endwith %}
            </div>
      </div>

    </div>

    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script type="text/javascript">

      // toggle side bars
        $("#f1_toggle").click(
               function() {
             $("#keyword_form").toggle();
             $(".caption_icon").toggle();
           })

        $("#f2_toggle").click(
                function() {
              $("#explorer_form").toggle();
          })

        $("#explorer_form").click(
                  function() {
                $(".embedded_explorer").toggle();
            })

        $("#f3_toggle").click(
                function() {
              $("#intralink_form").toggle();
          })

       // feature 1: show dynamic caption results
        $(".caption_icon").mouseover(function(){
             i = $(this).attr('value');
             // alert(icon_id)
             $("#captext_"+i).fadeIn();
        });

        $(".caption_icon").mouseleave(function(){
             i = $(this).attr('value');
             // alert(i);
             $("#captext_"+i).fadeOut();
        });


        // // feature 2: embed Google search results
        $("explorer_form").on("submit", function(event) {
               event.preventDefault();
               alert('explorer started!');
               $( "<b>hello**********</b>" ).appendTo( "body" );
               // process form
            });

      // links to build iframe mini browser within webpage
      // https://stackoverflow.com/questions/32921815/embed-web-browser-within-web-page
      // https://stackoverflow.com/questions/8863029/full-featured-iframe-w-forward-back-buttons-url-loader-etc



        $(".debug").click(
                 function() {
               $(".route_check").toggle();

             })

        var player, seconds = 0;
        function onYouTubeIframeAPIReady() {
            console.log("player");
            player = new YT.Player('player', {
                events: {
                  'onReady': onPlayerReady
                }
              });
        }

        function onPlayerReady(event) {
            event.target.playVideo();
        }

        function seek(sec){
            if(player){
                seconds += sec;
                player.seekTo(seconds, true);
            }
        }

    </script>


  </body>
</html>
